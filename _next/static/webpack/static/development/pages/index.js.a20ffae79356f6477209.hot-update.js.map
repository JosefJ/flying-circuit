{"version":3,"file":"static/webpack/static/development/pages/index.js.a20ffae79356f6477209.hot-update.js","sources":["webpack:///./components/Tickets.jsx"],"sourcesContent":["import { useState } from \"react\";\n\nconst initialState = {\n  email: \"\",\n  name: \"\",\n  projectDescription: \"\",\n  honeypot: \"\",\n  error: \"\",\n  submitted: false,\n};\n\nconst GOOGLE_SCRIPT_URL =\n  \"https://script.google.com/macros/s/AKfycbzzzic64flcbwKdrxVbS3kIla7TEsPEP6iTAVTn8-WeUK5miuIa/exec\";\n\nexport function Tickets() {\n  const [state, setState] = useState(initialState);\n\n  function updateState(key, value) {\n    setState({ ...state, [key]: value });\n  }\n\n  async function sendToSpreadsheet() {\n    updateState(\"error\", \"\");\n\n    const previousEmail = localStorage.getItem(\"hfc2019-email\");\n    if (previousEmail === state.email) {\n      updateState(\"submitted\", true);\n      updateState(\"error\", \"You already are on our list.\");\n      return false;\n    }\n\n    if (!state.email) {\n      updateState(\"submitted\", true);\n      updateState(\"error\", \"Email is missing!\");\n      return false;\n    }\n\n    if (!state.name) {\n      updateState(\"submitted\", true);\n      updateState(\"error\", \"Your name is missing!\");\n      return false;\n    }\n\n    if (!state.projectDescription) {\n      updateState(\"submitted\", true);\n      updateState(\"error\", \"Please describe what you're planning to work on during the event!\");\n      return false;\n    }\n\n    try {\n      const res = await fetch(\n        `${GOOGLE_SCRIPT_URL}?name=${encodeURIComponent(state.name)}&email=${encodeURIComponent(\n          state.email\n        )}&description=${encodeURIComponent(state.projectDescription)}`\n      );\n      if (res.status === 200) {\n        updateState(\"submitted\", true);\n        updateState(\"error\", \"\");\n        localStorage.setItem(\"hfc2019-email\", state.email);\n      }\n    } catch (err) {\n      updateState(\"submitted\", true);\n      updateState(\"error\", err.message);\n    }\n  }\n  console.log(state.submitted)\n  console.log(state.error, state.error ? \"yay\" : \"nay\");\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <h3>Tickets</h3>\n        <div>\n          lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum\n          lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum\n          lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum lorem ipsum\n          lorem ipsum lorem ipsum lorem ipsum\n        </div>\n      </div>\n      <div className=\"row ticket-form\">\n        <div className=\"six columns offset-by-three\">\n          <form\n            onSubmit={async e => {\n              e.preventDefault();\n              console.log(e.target.honeypot.value, e.target.honeypot.value ? \"yay\" : \"nay\");\n              if (e.target.honeypot.value || state.honeypot) {\n                return false;\n              }\n\n              await sendToSpreadsheet();\n            }}\n          >\n            <input\n              className=\"honeypot\"\n              type=\"text\"\n              name=\"honeypot\"\n              defaultValue=\"\"\n              onChange={e => updateState(\"honeypot\", e.target.value)}\n            />\n            <input\n              className=\"u-full-width\"\n              type=\"email\"\n              name=\"email\"\n              placeholder=\"Email\"\n              id=\"email-input\"\n              onChange={e => updateState(\"email\", e.target.value)}\n            />\n\n            <input\n              className=\"u-full-width\"\n              type=\"text\"\n              name=\"name\"\n              placeholder=\"Name\"\n              id=\"name-input\"\n              onChange={e => updateState(\"name\", e.target.value)}\n            />\n\n            <textarea\n              className=\"u-full-width\"\n              type=\"text\"\n              name=\"description\"\n              placeholder=\"Describe what you want to build in few words\"\n              id=\"project-description-input\"\n              onChange={e => updateState(\"projectDescription\", e.target.value)}\n            />\n\n            <input className=\"button\" type=\"submit\" value=\"RSVP\" />\n          </form>\n        </div>\n      </div>\n      {state.submitted && state.error ? (\n        <div className=\"row\">\n          <div>{state.error}</div>\n        </div>\n      ) : (\n        <div className=\"row\">\n          <div>Submitted! We're excited to see you at the event.</div>\n        </div>\n      )}\n      <style jsx>{`\n        .ticket-form {\n          margin-top: 50px;\n        }\n        .honeypot {\n          display: none;\n        }\n      `}</style>\n    </div>\n  );\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AANA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AANA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAUA;AACA;AAZA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAgBA;AACA;AAlBA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AACA;AAsBA;AACA;AAxBA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AA6BA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AAvCA;AAAA;AACA;AADA;AAAA;AAAA;AAwCA;AACA;AACA;AA1CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAPA;AAAA;AACA;AAkDA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AACA;AACA;AAAA;AAAA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AACA;AAAA;AAAA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AAAA;AAAA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AACA;AACA;AACA;AAAA;AAAA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAnEA;AAAA;AAAA;AAgFA;;;;A","sourceRoot":""}